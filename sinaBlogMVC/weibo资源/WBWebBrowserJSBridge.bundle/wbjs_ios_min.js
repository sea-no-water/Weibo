!function(e){if(!window.WeiboJSBridge){var n,t,i,r;!function(){function e(e,n){try{return e()}finally{n()}}function o(e,n,t,i){var r=["require","exports","module"];this.id=l++,this.name=e,this.deps=!n.length&&t.length?r:n,this.exports=i||{},this.callback=t,this.state=void 0}function a(e,n){if("."!==e.charAt(0))return e;var t,i,r=e.split("/"),o=n.split("/"),a=o.slice(0,-1),f=r.length;for(t=0;f>t;t++)if(i=r[t],".."===i)a.pop();else{if("."===i)continue;a.push(i)}return a.join("/")}function f(e,n,t){var r,o,f=e.deps,u=f.length,s=new Array(u),c={},d=u;for(o=0;d>o;o++)r=f[o],"exports"===r?c.exports=s[o]=t:"require"===r?s[o]=function(e){return i(a(e,n))}:"module"===r?(e.exports=t,c=s[o]=e):s[o]=i(a(r,n));return{deps:s,module:c}}var u;u=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var s={},c={},d=!1,l=0;n=function(e,n,t){u(n)||(t=n,n=[]),s[e]=new o(e,n,t)},n.amd={},r=i=t=function(n){var t=s[n];if(!t)throw new Error("Could not find module "+n);if(t.state!==d&&c.hasOwnProperty(n))return c[n];var i,r,o=!1;c[n]={},e(function(){i=f(t,n,c[n]),r=t.callback.apply(this,i.deps),o=!0},function(){o||(t.state=d)});var a;return a=void 0===r&&i.module.exports?i.module.exports:c[n]=r,null===a||"object"!=typeof a&&"function"!=typeof a||void 0!==a["default"]||(a["default"]=a),c[n]=a,a},r.entries=r._eak_seen=s,r.clear=function(){r.entries=r._eak_seen=s={},c={}}}(),n("wbjs-core",["wbjs-dispatcher","exports"],function(e,n){"use strict";function t(e){for(var n in M)if(M[n]===e)return n;return""}function i(e){return e?h[e]:null}function r(e){"object"!=typeof e&&(e={}),h=e}function o(e){for(var n in e)k[n]=e[n]}function a(){return k.debug}function f(e){var n=document.getElementById(e);if(n){if("iframe"===n.tagName.toLowerCase())return n;n.parentNode.removeChild(n),n=null}return!n&&J()&&(n=document.createElement("iframe"),n.id=e,n.style.display="none",document.documentElement.appendChild(n)),n}function u(){return y&&y.parentElement!==document.documentElement&&(y=null),y||(y=f("__WeiboJSInvokeIframe")),y}function s(){var e=u();e?(e.src=b,C=!1):C=!0}function c(e,n,t,i){if(e&&"string"==typeof e){"object"!=typeof n&&(n={});var r=(N++).toString(),o={action:e,params:n,type:i};"function"==typeof t?o[B]=t:"object"==typeof t&&(o[R]=t[R],o[j]=t[j],o[B]=t[B]),A[r]=o;var a={action:e,params:n};a[_]=i,r&&(a[E]=r),O.push(a),s()}}function d(e,n,t){if(e&&"string"==typeof e){var i={},r=I;"function"==typeof n?i[r]=n:"object"==typeof n&&(i=n),i[r]||(i[r]=function(){});var o=x[e];o||(o=[],x[e]=o);var a=i[r];if(o.push(a),!t)if(D[e]){var f=M.OK,u=i[R];u&&u({},f);var s=i[B];s&&s({},!0,f)}else{D[e]=!0;var d=i[B];i[B]=function(n,t,i){t||(D[e]=!1),d&&d(n,t,i)},c(e,null,i,"register")}return a}}function l(e,n){if(!e||"string"!=typeof e)return!1;var t=x[e];if(t)if(n){var i=t.indexOf(n);if(-1===i)return!1;t.splice(i,1)}else for(;t.length;)t.pop();return!t.length&&D[e]&&(D[e]=!1,c(e,null,{"final":function(n,t){t||(D[e]=!0)}},"unregister")),!0}function p(e,n){if(!e||"string"!=typeof e)return!1;var t=!1,i=x[e];if(i){var r,o=i.length;for(r=0;o>r;r++)i[r](n),t=!0}return t}function v(e,n,t){c(e,n,t,"call")}function g(e){var n=e[_];switch(n){case"callback":var i=e[E];if("string"==typeof i&&"object"==typeof A[i]){var r=e.params,o=!e.failed,f=e.status,u=A[i],s=o?u[R]:u[j];"function"==typeof s&&s(r,f),"function"==typeof u[B]&&u[B](r,o,f);var c=a();if(c&&!o){var d=u.action,l=T(u.params),v=t(f)+" ("+f+")",g='Action "'+d+'" invoke failed! \nreason: '+v+". \nparams: "+l;"console"!==c&&alert(g),console.log(g)}delete A[i]}break;case"event":var m=e[S];if(p(m,e.params))return}}function m(){var e=T(O);return O=[],e}var y,w=e["default"],h={},b="sinaweibo://bridge_invoke_message",_="__msg_type",E="__callback_id",S="__event_name",R="success",j="fail",B="final",I="trigger",O=[],A=[],N=1e3,x={},C=!1,k={},D={},J=w.domIsReady,L=w.onDomReady,T=JSON.stringify,M={OK:200,MISSING_PARAMS:400,ILLEGAL_ACCESS:403,INTERNAL_ERROR:500,ACTION_NOT_FOUND:501,NO_RESULT:550,USER_CANCELLED:550,SERVICE_FORBIDDEN:553};L(function(){C&&s()});var W={invoke:v,on:d,off:l,STATUS_CODE:M,config:o,_messageQueue:m,_handleMessage:g,_trigger:p,_env:i,_setEnv:r};window.__WeiboJSBridge=W,n["default"]=W}),n("wbjs-dispatcher",["exports"],function(e){"use strict";function n(e){"function"==typeof e&&(p?e():s.push(e))}function t(e){"function"==typeof e&&(v?e():c.push(e))}function i(e){"function"==typeof e&&(p&&v?e():d.push(e))}function r(e){"function"==typeof e&&l.push(e)}function o(){if(v&&p)for(;d.length;){var e=d.shift();e()}}function a(){if(!v){for(v=!0;c.length;){var e=c.shift();e()}o()}}function f(){if(!p){for(p=!0;s.length;){var e=s.shift();e()}o()}}function u(e){for(var n=l.length-1;n>=0;n--){var t=l[n];t(e)}}var s=[],c=[],d=[],l=[],p=!1,v=!1;"loading"!==document.readyState?f():document.addEventListener("DOMContentLoaded",f,!1),e["default"]={_bridgeBecomeReady:a,_iframeBecomeReady:u,bridgeIsReady:function(){return v},domIsReady:function(){return p},onDomReady:n,onBridgeReady:t,onBridgeDomReady:i,onIframeReady:r}}),n("wbjs-events",["wbjs-core","wbjs-iframe","wbjs-dispatcher"],function(e,n,t){"use strict";function i(e){return e=parseInt(e,10),(window.isNaN(e)||0===e)&&(e=100),e=window.Math.max(20,e),e=window.Math.min(e,400),e}function r(){var e=i(d("initTextPercent"));return{percent:e}}function o(){function e(e,n,t){s(e,function(e){if(t){var i=window[t];if("function"==typeof i)return i(e),void 0}n(e)},!0)}var n="_fontSettingsChanged_ios";u.onIframeReady(function(e){f.triggerDefaultEvent(n,r(),e)}),e("_fontSettingChanged",function(e){if(e){var t=i(e.percent);document.getElementsByTagName("body")[0].style.webkitTextSizeAdjust=t+"%",f.triggerDefaultEvent(n,e)}},"WeiboJSBridgeSetFont")}var a=e["default"],f=n["default"],u=t["default"],s=a.on,c=a._trigger,d=a._env,l=a._setEnv;u.onBridgeDomReady(function(){c("_fontSettingChanged",r())}),s("bridge:initialize",function(e){if(!u.bridgeIsReady()){l(e),o(),window.WeiboJSBridge=a,u._bridgeBecomeReady();var n=document.createEvent("Events");n.initEvent("WeiboJSBridgeReady"),n.bridge=a,document.dispatchEvent(n),f.mainFrameBecomeReady()}},!0)}),n("wbjs-iframe",["wbjs-core","wbjs-utilities","wbjs-dispatcher","exports"],function(e,n,t,i){"use strict";function r(e){function n(e){var n=e.indexOf(o);return-1===n?null:e.substring(n+o.length)}function t(e,n,t,i){l(e,n,function(e,n,r){if(t){var a="WeiboJSBridge"+o+t+o;e={params:e,success:n,code:r};try{a+=c(e)}catch(f){a+=c({success:!1,code:v.INTERNAL_ERROR})}i.source.postMessage(a,i.origin)}})}function i(e,n,t){e.length&&p(e,function(e){if(n){var i="WeiboJSBridge"+o+n;if(e)try{i+=o+c(e)}catch(r){}t.source.postMessage(i,t.origin)}})}if(e.data===s){if(e.source===window.top)return;var r=e.source;return r.postMessage(s,e.origin),f._iframeBecomeReady(r),void 0}var o=u,a=(e.data||"").trim();if(0===a.indexOf("WeiboJSBridge"+o)&&(a=n(a),a)){var g=a.split(o)[0];if(a=n(a),a){var m=a.split(o)[0];a=n(a);var y=null;a&&(y=a.split(o)[0],a=n(a));var w=null;if(a)try{w=d(a)}catch(h){}"invoke"===g?t(m,w,y,e):"on"===g&&i(m,y,e)}}}var o=e["default"],a=n["default"],f=t["default"],u=":::",s="WeiboJSBridge"+u+"communicationReady",c=window.JSON.stringify,d=window.JSON.parse,l=o.invoke,p=o.on,v=o.STATUS_CODE;window.addEventListener("message",r);var g={mainFrameBecomeReady:function(){a.forEachIframe(function(e){e.postMessage(s,"*")})},triggerDefaultEvent:function(e,n){if(e.length){n||(n={});var t=u,i="WeiboJSBridge"+t+e+t+c(n);a.forEachIframe(function(e){e.postMessage(i,"*")})}}};i["default"]=g}),n("wbjs-utilities",["exports"],function(e){"use strict";var n={};n.base64encode=function(e){return void 0===e?e:window.btoa(window.unescape(window.encodeURIComponent(e)))},n.forEachIframe=function(e){function n(e,t){var i=e.frames;t.push(i);var r;for(r=i.length-1;r>=0;r--)n(i[r],t);return t}if("function"==typeof e){var t,i,r=n(window.top,[]);for(t=r.length-1;t>=0;t--)i=r[t],i!==window&&e(i)}},e["default"]=n}),n("wbjs",["wbjs-core","wbjs-iframe","wbjs-events","exports"],function(e,n,t,i){"use strict";var r=e["default"];i["default"]=r}),i("wbjs")["default"]._trigger("bridge:initialize",e)}}