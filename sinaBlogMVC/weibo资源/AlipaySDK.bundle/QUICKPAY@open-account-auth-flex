{"time":"0105","tplId":"QUICKPAY@open-account-auth-flex","publishVersion":"150924","tag":"QUICKPAY","name":"open-account-auth-flex","data":{"tag":"html","children":[{"tag":"head","children":[{"tag":"script","src":"open-account-auth-flex.js"},{"tag":"meta","src":"AlipaySDK.bundle/amc.i18n","type":"i18n"},{"tag":"script","src":"AlipaySDK.bundle/amc.js"},{"tag":"link","rel":"stylesheet","href":"AlipaySDK.bundle/amc.css"},{"tag":"script","children":[{"text":"var create=amc.fn.create;var getTag=amc.fn.getById;var checkedPng=amc.path+\"alipay_msp_checked\";var logoPng=amc.rpcData.params.logo_url||\"\";var authTitle=amc.rpcData.params.auth_title||\"\";var optionTitle=amc.rpcData.params.auth_option_title||\"\";var authOptionList=amc.rpcData.params.auth_option_list||\"\";var authType=amc.rpcData.params.auth_type||\"\";var optionRight=\"\";var mobileMask=amc.rpcData.hidden_logon_id||\"\";var checkboxs=[];var protocols=[];var authTypeText=\"{{auth}}\";var getTag=amc.fn.getById;var canAuth=true;function init(){if(authType==\"LOGIN\"){authTypeText=\"{{login}}\"}var b=\"{{alipay}}\"+authTypeText;var c=amc.fn.navBack(false,b,null,null,onBack,null);getTag(\"body\").insertBefore(c,getTag(\"topBody\"));initText();getTag(\"logo\").src=logoPng;getTag(\"authTitle\").innerText=authTitle;getTag(\"mobileMask\").innerText=mobileMask;getTag(\"optionTitle\").innerText=optionTitle;if(text_list=amc.rpcData.params.auth_text_list){if(text_list.length>3){optionRight=text_list[0]+\"{{dotspot}}\"+text_list[1]+\"{{dotspot}}\"+text_list[2]+\"{{and_so_on}}\"}else{optionRight=text_list.join(\"{{dotspot}}\")}}getTag(\"optionRight\").innerText=optionRight;checkboxs=getOptionList(authOptionList,\"TEXT\");if(checkboxs&&checkboxs.length>0){for(var a in checkboxs){initCheckbox(checkboxs[a])}}protocols=getOptionList(authOptionList,\"URL\");if(protocols.length==0){getTag(\"protocolArea\").style.display=\"none\"}}function initText(){getTag(\"confirmBtn\").innerText=\"{{confirm_btn}}\"+authTypeText;getTag(\"tipText\").innerText=\"{{use_alipay_account}}\"+authTypeText}function getOptionList(d,b){var c=[];for(var a in d){if(d[a].type==b){c.push(d[a])}}return c}function initCheckbox(b){var a=getTag(\"checkArea\");var c=create(\"div\");c.className=\"amc-align-center amc-margin-b-s\";var d;if(b.forced){d=create(\"img\");d.className=\"amc-check-img\";d.src=checkedPng;c.appendChild(d)}else{d=create(\"input\");c.appendChild(d);d.type=\"checkbox\";d.className=\"amc-checkbox\";d.checked=b.checked}d.className=d.className+\" amc-margin-r-xs\";checklabel=create(\"label\");checklabel.innerText=b.optionText;checklabel.className=\"amc-font-m\";c.appendChild(checklabel);a.appendChild(c);b._checkbox=d}function showProtocol(){for(var a=0;a<protocols.length;a++){protocols[a][\"text\"]=\"{{serve_protocol}}\";protocols[a][\"url\"]=protocols[a][\"optionText\"]}amc.fn.showProtocolList(protocols)}function onSubmit(){if(!canAuth){return}var b=[];for(var a=0;a<checkboxs.length;a++){if(checkboxs[a].forced){b.push(checkboxs[a].optionKey)}else{if(checkboxs[a][\"_checkbox\"].checked===true||checkboxs[a][\"_checkbox\"].checked===\"1\"){b.push(checkboxs[a].optionKey)}}}b.push(\"PROTOCOL\");var c={param:{agree:b},action:{name:\"/account/auth\",loadtxt:\"\"}};amc.fn.playGif(getTag(\"gifImg\"),amc.res.loading);getTag(\"btnText\").innerText=\"{{confirming_upgrade}}\";document.submit(c);setTimeout(resetBtn,3000);canAuth=false}function resetBtn(){amc.fn.playGif(getTag(\"gifImg\"),\"\");getTag(\"btnText\").innerText=\"{{confirm_btn}}\"+authTypeText;canAuth=true}function onKeyDown(){if(event.which==4){onBack()}}function onBack(){amc.fn.exitConfirm(\"{{confirm_exit}}\")}function onSwitchAccount(){var a={action:{name:\"/cashier/switchAccount\"}};document.submit(a)};","tag":"text"}]},{"tag":"style","children":[{"text":".bold-text{font-weight:bold}\n.amc-nav-r-box {}\n.amc-nav-l-text {color:#fff;font-size:14px;text-align:left;}","tag":"text"}]}]},{"id":"body","onload":"init()","tag":"body","children":[{"id":"topBody","tag":"div","children":[{"tag":"div","children":[{"id":"logo","tag":"img","css":"open-auth-img"}],"css":"amc-pd-tb"},{"tag":"div","children":[{"id":"authTitle","tag":"label","css":"amc-font-xl"}],"css":"amc-pd-b"},{"tag":"div","css":"amc-abs-space-v-s"},{"id":"tipText","tag":"label","children":[{"text":"{{use_alipay_auth}}","tag":"text"}],"css":"amc-font-xl"},{"tag":"div","css":"amc-abs-space-v-ss"},{"tag":"div","children":[{"id":"mobileMask","tag":"label","css":"amc-font-xl amc-margin-r-xs"},{"id":"changeBtn","tag":"label","children":[{"text":"{{sel}}","tag":"text"}],"onclick":"onSwitchAccount()","css":"amc-font-xl amc-theme-color"}],"css":"amc-pd-b"},{"tag":"div","css":"amc-1px-line"}],"css":"amc-pd-t amc-v-box amc-align-center amc-bg-white"},{"tag":"div","children":[{"id":"tipArea","tag":"div","children":[{"tag":"div","css":"amc-abs-space-v-l"},{"id":"optionTitle","tag":"label","css":"amc-margin-b-s amc-font-xl bold-text"},{"id":"optionRight","tag":"label","css":"amc-margin-b amc-font-s amc-text-light-color"}],"css":"amc-pd-lr amc-v-box"},{"tag":"div","css":"amc-abs-space-v-s"},{"id":"checkArea","tag":"div","css":"amc-pd-lr amc-v-box"},{"tag":"div","css":"amc-abs-space-v-s"},{"id":"container","tag":"div","children":[{"id":"confirmBtn","tag":"div","children":[{"id":"gifImg","tag":"img","css":"amc-btn-img amc-hidden"},{"id":"btnText","tag":"label","children":[{"text":"{{confirm_auth}}","tag":"text"}],"css":"amc-btn-text-color amc-font-super-l"}],"onclick":"onSubmit()","css":"amc-btn-primary amc-justify-center amc-align-center"}],"css":"amc-pd-lr amc-pd-b"},{"id":"protocolArea","tag":"div","children":[{"id":"agree","tag":"label","children":[{"text":"{{agree}}","tag":"text"}],"css":"amc-font-m amc-margin-r-xs"},{"id":"protocol","tag":"label","children":[{"text":"{{serve_protocol}}","tag":"text"}],"onclick":"showProtocol()","css":"amc-font-m amc-theme-color"}],"css":"amc-pd-lr amc-pd-b"}],"css":"amc-v-box"}],"onkeydown":"onKeyDown()","css":"amc-body"}]},"format":"JSON","tplVersion":"5.0.2"}